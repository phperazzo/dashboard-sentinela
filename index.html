<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Sentinela</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- âœ… Chart.js para grÃ¡ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- âœ… Biblioteca MQTT (ESSENCIAL) -->
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
    
    <!-- Font Awesome icons via CSS -->
    <style>
        /* Simple icon replacements */
        .fas.fa-shield-alt::before { content: "ğŸ›¡ï¸"; }
        .fas.fa-wifi::before { content: "ğŸ“¶"; }
        .fas.fa-wifi-slash::before { content: "ğŸ“µ"; }
        .fas.fa-thermometer-half::before { content: "ğŸŒ¡ï¸"; }
        .fas.fa-tint::before { content: "ğŸ’§"; }
        .fas.fa-bolt::before { content: "âš¡"; }
        .fas.fa-ethernet::before { content: "ğŸŒ"; }
        .fas.fa-circle::before { content: "â—"; }
        .fas.fa-chart-line::before { content: "ğŸ“ˆ"; }
        .fas.fa-chart-area::before { content: "ğŸ“Š"; }
        .fas { font-style: normal; }
        
        /* âœ… Estilo adicional para status do MQTT */
        .kafka-status {
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            margin-left: 10px;
        }
        .kafka-status.connected {
            background: #d4edda;
            color: #155724;
        }
        .kafka-status.disconnected {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <header class="dashboard-header">
            <h1><i class="fas fa-shield-alt"></i> Dashboard Sentinela</h1>
            <div class="connection-status" id="connectionStatus">
                <i class="fas fa-wifi"></i>
                <span>Conectando...</span>
            </div>
            <!-- âœ… Status do MQTT -->
        </header>

        <main class="dashboard-main">
            <div class="metrics-grid">
                <!-- Temperature Card -->
                <div class="metric-card temperature-card">
                    <div class="metric-header">
                        <i class="fas fa-thermometer-half"></i>
                        <h3>Temperatura</h3>
                    </div>
                    <div class="metric-value">
                        <span class="value" id="temperature">--</span>
                        <span class="unit">Â°C</span>
                    </div>
                    <div class="metric-status" id="temperatureStatus">
                        <span class="status-text">Aguardando dados...</span>
                    </div>
                </div>

                <!-- Humidity Card -->
                <div class="metric-card humidity-card">
                    <div class="metric-header">
                        <i class="fas fa-tint"></i>
                        <h3>Umidade</h3>
                    </div>
                    <div class="metric-value">
                        <span class="value" id="humidity">--</span>
                        <span class="unit">%</span>
                    </div>
                    <div class="metric-status" id="humidityStatus">
                        <span class="status-text">Aguardando dados...</span>
                    </div>
                </div>

                <!-- Voltage Card -->
                <div class="metric-card voltage-card">
                    <div class="metric-header">
                        <i class="fas fa-bolt"></i>
                        <h3>TensÃ£o da Rede</h3>
                    </div>
                    <div class="metric-value">
                        <span class="value" id="voltage">--</span>
                        <span class="unit">V</span>
                    </div>
                    <div class="metric-status" id="voltageStatus">
                        <span class="status-text">Aguardando dados...</span>
                    </div>
                    <div class="voltage-variation">
                        <span>VariaÃ§Ã£o: <span id="voltageVariation">--</span>%</span>
                    </div>
                </div>

                <!-- Ethernet Status Card -->
                <div class="metric-card ethernet-card">
                    <div class="metric-header">
                        <i class="fas fa-ethernet"></i>
                        <h3>Rede Ethernet</h3>
                    </div>
                    <div class="ethernet-status" id="ethernetStatus">
                        <div class="status-indicator" id="ethernetIndicator">
                            <i class="fas fa-circle"></i>
                        </div>
                        <span class="status-text" id="ethernetText">Verificando...</span>
                    </div>
                    <div class="ethernet-details">
                        <div class="detail-item">
                            <span>IP: <span id="ethernetIP">--</span></span>
                        </div>
                        <div class="detail-item">
                            <span>Velocidade: <span id="ethernetSpeed">--</span></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-section">
                <div class="chart-container">
                    <h3><i class="fas fa-chart-line"></i> HistÃ³rico de Temperatura</h3>
                    <canvas id="temperatureChart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3><i class="fas fa-chart-area"></i> HistÃ³rico de Umidade</h3>
                    <canvas id="humidityChart"></canvas>
                </div>
            </div>
            
            <!-- âœ… SeÃ§Ã£o de Log de Eventos (NOVA) -->
            <div class="events-section">
                <h3><i class="fas fa-list-alt"></i> Log de Eventos</h3>
                <div class="event-log" id="eventLog">
                    <div class="event-log-item">
                        <span class="event-time">--:--:--</span>
                        <span class="event-type">Sistema</span>
                        <span class="event-value">Aguardando eventos...</span>
                    </div>
                </div>
            </div>
        </main>

        <footer class="dashboard-footer">
            <p>Ãšltima atualizaÃ§Ã£o: <span id="lastUpdate">--</span></p>
            <p>Sistema Sentinela v1.0 - Conectado via MQTT</p>
                <p>Sistema Sentinela v1.0</p>
        </footer>
    </div>

    <!-- âœ… Script.js DEVE vir DEPOIS das bibliotecas -->
    <script src="script.js"></script>
</body>
</html>