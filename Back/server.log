[dotenv@17.2.2] injecting env (17) from .env -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }
[AVISO] VariÃ¡veis WSS_KEY/WSS_CERT nÃ£o definidas. Iniciando apenas HTTP.
ğŸš€ Servidor HTTP rodando na porta 3000 em 0.0.0.0
âœ… Conectado ao broker MQTT: mqtts://bdffc9a5bf6e4bf28591393206fc27e0.s1.eu.hivemq.cloud:8883
ğŸŸ¢ Subscreveu tÃ³pico: sentinela/sync
ğŸŸ¢ Subscreveu tÃ³pico: sentinela/async
âœ… Novo cliente WebSocket conectado
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'latency',
  value: 35,
  unit: 'ms',
  timestamp: '2025-12-01T19:50:09.660Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'voltage',
  value: 220.5,
  unit: 'V',
  timestamp: '2025-12-01T19:50:10.160Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'rms',
  value: 127.3,
  unit: 'V',
  timestamp: '2025-12-01T19:50:10.661Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'energia caiu', timestamp: '2025-12-01T19:50:11.161Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 1 clientes
âš ï¸ Evento crÃ­tico: power_outage - energia caiu
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'latency',
  value: 42,
  unit: 'ms',
  timestamp: '2025-12-01T19:50:11.660Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'rede caiu', timestamp: '2025-12-01T19:50:12.160Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 1 clientes
âš ï¸ Evento crÃ­tico: network_outage - rede caiu
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'voltage',
  value: 218.3,
  unit: 'V',
  timestamp: '2025-12-01T19:50:12.660Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'energia voltou', timestamp: '2025-12-01T19:50:13.160Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 1 clientes
âš ï¸ Evento crÃ­tico: power_restored - energia voltou
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'rms',
  value: 125.8,
  unit: 'V',
  timestamp: '2025-12-01T19:50:13.660Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'rede voltou', timestamp: '2025-12-01T19:50:14.160Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 1 clientes
âš ï¸ Evento crÃ­tico: network_restored - rede voltou
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
âŒ Cliente WebSocket desconectado
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'latency',
  value: 35,
  unit: 'ms',
  timestamp: '2025-12-01T19:55:46.736Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 0 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 0 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'voltage',
  value: 220.5,
  unit: 'V',
  timestamp: '2025-12-01T19:55:47.237Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 0 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 0 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'rms',
  value: 127.3,
  unit: 'V',
  timestamp: '2025-12-01T19:55:47.737Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 0 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 0 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'energia caiu', timestamp: '2025-12-01T19:55:48.237Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 0 clientes
âš ï¸ Evento crÃ­tico: power_outage - energia caiu
ğŸ“¤ Broadcasting WebSocket: undefined 0 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 0 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'latency',
  value: 42,
  unit: 'ms',
  timestamp: '2025-12-01T19:55:48.737Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 0 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 0 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'rede caiu', timestamp: '2025-12-01T19:55:49.237Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 0 clientes
âš ï¸ Evento crÃ­tico: network_outage - rede caiu
ğŸ“¤ Broadcasting WebSocket: undefined 0 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 0 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'voltage',
  value: 218.3,
  unit: 'V',
  timestamp: '2025-12-01T19:55:49.737Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 0 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 0 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'energia voltou', timestamp: '2025-12-01T19:55:50.237Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 0 clientes
âš ï¸ Evento crÃ­tico: power_restored - energia voltou
ğŸ“¤ Broadcasting WebSocket: undefined 0 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 0 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'rms',
  value: 125.8,
  unit: 'V',
  timestamp: '2025-12-01T19:55:50.738Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 0 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 0 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'rede voltou', timestamp: '2025-12-01T19:55:51.237Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 0 clientes
âš ï¸ Evento crÃ­tico: network_restored - rede voltou
ğŸ“¤ Broadcasting WebSocket: undefined 0 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 0 clientes
âœ… Novo cliente WebSocket conectado
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'latency',
  value: 35,
  unit: 'ms',
  timestamp: '2025-12-01T19:56:30.570Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'voltage',
  value: 220.5,
  unit: 'V',
  timestamp: '2025-12-01T19:56:31.072Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'rms',
  value: 127.3,
  unit: 'V',
  timestamp: '2025-12-01T19:56:31.572Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'energia caiu', timestamp: '2025-12-01T19:56:32.072Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 1 clientes
âš ï¸ Evento crÃ­tico: power_outage - energia caiu
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'latency',
  value: 42,
  unit: 'ms',
  timestamp: '2025-12-01T19:56:32.572Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'rede caiu', timestamp: '2025-12-01T19:56:33.072Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 1 clientes
âš ï¸ Evento crÃ­tico: network_outage - rede caiu
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'voltage',
  value: 218.3,
  unit: 'V',
  timestamp: '2025-12-01T19:56:33.572Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'energia voltou', timestamp: '2025-12-01T19:56:34.072Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 1 clientes
âš ï¸ Evento crÃ­tico: power_restored - energia voltou
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'rms',
  value: 125.8,
  unit: 'V',
  timestamp: '2025-12-01T19:56:34.572Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'rede voltou', timestamp: '2025-12-01T19:56:35.072Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 1 clientes
âš ï¸ Evento crÃ­tico: network_restored - rede voltou
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
âŒ Cliente WebSocket desconectado
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'latency',
  value: 35,
  unit: 'ms',
  timestamp: '2025-12-01T19:58:53.186Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 0 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 0 clientes
âœ… Novo cliente WebSocket conectado
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'voltage',
  value: 220.5,
  unit: 'V',
  timestamp: '2025-12-01T19:58:53.686Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'rms',
  value: 127.3,
  unit: 'V',
  timestamp: '2025-12-01T19:58:54.186Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'energia caiu', timestamp: '2025-12-01T19:58:54.686Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 1 clientes
âš ï¸ Evento crÃ­tico: power_outage - energia caiu
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'latency',
  value: 42,
  unit: 'ms',
  timestamp: '2025-12-01T19:58:55.186Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'rede caiu', timestamp: '2025-12-01T19:58:55.686Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 1 clientes
âš ï¸ Evento crÃ­tico: network_outage - rede caiu
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'voltage',
  value: 218.3,
  unit: 'V',
  timestamp: '2025-12-01T19:58:56.186Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'energia voltou', timestamp: '2025-12-01T19:58:56.686Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 1 clientes
âš ï¸ Evento crÃ­tico: power_restored - energia voltou
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'rms',
  value: 125.8,
  unit: 'V',
  timestamp: '2025-12-01T19:58:57.186Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'rede voltou', timestamp: '2025-12-01T19:58:57.686Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 1 clientes
âš ï¸ Evento crÃ­tico: network_restored - rede voltou
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
Erro MQTT: Error: read ECONNRESET
    at TLSWrap.onStreamRead (node:internal/stream_base_commons:216:20) {
  errno: -104,
  code: 'ECONNRESET',
  syscall: 'read'
}
âœ… Conectado ao broker MQTT: mqtts://bdffc9a5bf6e4bf28591393206fc27e0.s1.eu.hivemq.cloud:8883
ğŸŸ¢ Subscreveu tÃ³pico: sentinela/sync
ğŸŸ¢ Subscreveu tÃ³pico: sentinela/async
âŒ Cliente WebSocket desconectado
âœ… Novo cliente WebSocket conectado
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'latency',
  value: 1000,
  unit: 'ms',
  timestamp: '2025-12-01T20:01:36.118Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'voltage',
  value: 50,
  unit: 'V',
  timestamp: '2025-12-01T20:01:36.620Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'rms',
  value: 10,
  unit: 'V',
  timestamp: '2025-12-01T20:01:37.121Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'latency',
  value: 35,
  unit: 'ms',
  timestamp: '2025-12-01T20:01:51.708Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'voltage',
  value: 220.5,
  unit: 'V',
  timestamp: '2025-12-01T20:01:52.208Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'rms',
  value: 127.3,
  unit: 'V',
  timestamp: '2025-12-01T20:01:52.709Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'energia caiu', timestamp: '2025-12-01T20:01:53.208Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 1 clientes
âš ï¸ Evento crÃ­tico: power_outage - energia caiu
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'latency',
  value: 42,
  unit: 'ms',
  timestamp: '2025-12-01T20:01:53.708Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'rede caiu', timestamp: '2025-12-01T20:01:54.208Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 1 clientes
âš ï¸ Evento crÃ­tico: network_outage - rede caiu
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'voltage',
  value: 218.3,
  unit: 'V',
  timestamp: '2025-12-01T20:01:54.708Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'energia voltou', timestamp: '2025-12-01T20:01:55.208Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 1 clientes
âš ï¸ Evento crÃ­tico: power_restored - energia voltou
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/sync': {
  type: 'rms',
  value: 125.8,
  unit: 'V',
  timestamp: '2025-12-01T20:01:55.709Z'
}
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
ğŸ“¥ MQTT recebido do tÃ³pico 'sentinela/async': { message: 'rede voltou', timestamp: '2025-12-01T20:01:56.208Z' }
ğŸ“¤ Broadcasting WebSocket: critical_event 1 clientes
âš ï¸ Evento crÃ­tico: network_restored - rede voltou
ğŸ“¤ Broadcasting WebSocket: undefined 1 clientes
ğŸ“¤ Broadcasting WebSocket: mqtt_message 1 clientes
